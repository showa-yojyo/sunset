---
title: 456 日目（晴れのち雨）嵐の前なのか
---

WebGL のコードをデバッグしていたら日付が変わっていた。
昔と違ってエラーメッセージが出てくるから作業はしやすい。

* [松任谷由実 - 真夏の夜の夢 - YouTube](https://www.youtube.com/watch?v=fxTD_ZIAnH4):
  去年浅草橋のビジネスホテルでよく聴いていたのう。
* [松任谷由実 - リフレインが叫んでる - YouTube](https://www.youtube.com/watch?v=-ZpQmBhxOT0):
  どうして

[DeepL] で昭和 J-POP の歌詞を英訳して遊ぶ。
原文が叙情的であっても、翻訳すると普通の表現になるだろう。そうでもない。
やはり何か魂のようなものがかすかに残る。

<!-- https://www.deepl.com/translator#ja/en/%E6%94%BE%E8%AA%B2%E5%BE%8C%E3%81%AE%E6%A0%A1%E5%BA%AD%E3%82%92%E8%B5%B0%E3%82%8B%E5%90%9B%E3%81%8C%E3%81%84%E3%81%9F%E3%80%82%0A%0A%E9%81%A0%E3%81%8F%E3%81%A7%E5%83%95%E3%81%AF%E3%81%84%E3%81%A4%E3%82%82%E5%90%9B%E3%82%92%E6%8E%A2%E3%81%97%E3%81%A6%E3%81%84%E3%81%9F%E3%80%82%0A%0A%E6%B5%85%E3%81%84%E5%A4%A2%E3%81%A0%E3%81%8B%E3%82%89%E8%83%B8%E3%82%92%E9%9B%A2%E3%82%8C%E3%81%AA%E3%81%84%E3%80%82 -->

2:00 就寝。わりと涼しいので楽だ。

10:30 目が覚める。せっかく涼しいので体力を効率よく回復したいので多く寝た。
納豆とミニおにぎりを食らって、やることがないので散歩。

イトーヨーカドー曳舟店で体温チェック。ひきふね図書館に移動。
産経新聞と東京新聞を読む。『たそがれたかこ』第一巻の冒頭 100 ページほど見る。
二階の特設コーナーで小学生が自習をしている。いい PC を使っている。トイレを使って退館。

コンビニで雑誌チェックをしようと考えたがやめて、すぐに曳舟の部屋に戻る。もう昼だ。

* [Tutorial 5 : A Textured Cube](http://www.opengl-tutorial.org/beginners-tutorials/tutorial-5-a-textured-cube/)
  * BMP の読み込みを熟読する必要はない。
  * 最初のテクスチャーマッピングが粗いことに注意。そこで線形補間を選択するのは普通。
  * さらに Anisotropic filtering という方式もあることを教えてくれる。
  * 圧縮テクスチャー？
  * DDS フォーマット？
  * OpenGL の `glCompressedTexImage2D` に相当する API が WebGL にあるか？
    * 存在する。拡張を有効にする必要がある。
    * [WEBGL_compressed_texture_s3tc - Web APIs &#x7c; MDN](https://developer.mozilla.org/en-US/docs/Web/API/WEBGL_compressed_texture_s3tc)
  * DXT 圧縮 は DirectX の世界から来ている。すなわち座標系のセンスが異なる。
  * 一般的には、圧縮テクスチャーのみを使用するべきだ。
    保存サイズが小さく、ロードがほぼ瞬時に完了し、使用も速いからだ。
    * ということは、この技法を知らないままでいるのはマズイ。

これを WebGL に移植する自信がない。とにかく進めるところまで進めるしかない。

14:30 麻雀の練習をしながらおやつ休憩。
CPU 雀士が九蓮宝燈をテンパイしていたが、安目でアガらされる。

![チューレンの出来損ない]({{ "/assets/images/20210726-mattari.png" | relative_url }})

15:00 移植作業を進める。まずは頭を使わぬ部分を済ませる。
サブディレクトリーを作ったり、HTML トップページからのリンクを追加したり、
BMP 読み込みはひとまず飛ばして、シェーダーを手本から写す。
C のコードを JavaScript に置き換えるのもすんなり終わる。テクスチャー生成関数の中身を除いては。

涼しいので少し横になる。

16:50 外出。押上駅バス停の横断歩道前についた途端、錦糸町駅行きのバスが停留所に到着。
横断歩道の信号は赤。これは間に合わぬパターンだ。諦めてスカイツリータウンに入る。

三省堂書店で雑誌チェック。アエラが変則的に発売日をずらしている。オリンピック会期中は火曜売りだそうだ。
週プレは先週が合併号だからチェックなし。

トイレで本日二度目の踏ん張り。バス停に移動してバスに乗る。

18:00 いいタイミングでタイトー F ステーションオリナス錦糸町店に入店。
携帯電話を持って出なかったから時間つぶしの手段がないところだった。

MJ プロ卓東風戦 5 クレ（実質 4 クレ）。三連敗両端のゲームでの理由が謎。
最後のゲームは僅差から逆転トップ。形テン以上が必要だから、ドラ面子を含む二面子を副露して、
発バックの六萬とのシャンポンでイヤイヤ構える。
終盤で対面から発が手出しでポロリ。
六萬は誰かのロン牌であることがわかり、つまりこのエレガントでないテンパイが唯一解だった。

```text
【SCORE】
合計SCORE:-16.2

【最終段位】
四人打ち段位:伏龍 幻球:6

【7/26の最新8試合の履歴】
1st|*-*----*
2nd|--------
3rd|-*----*-
4th|---***--
old         new

【順位】
1位回数:3(37.50%)
2位回数:0(0.00%)
3位回数:2(25.00%)
4位回数:3(37.50%)
平均順位:2.63

プレイ局数:37局

【打ち筋】
アガリ率:21.62%(8/37)
平均アガリ翻:2.25翻
平均アガリ巡目:11.38巡
振込み率:10.81%(4/37)

【7/26の最高役】
最高役のデータがありません。最高役は、跳満以上のアガリが対象となります。
```

ビートマニア STANDARD モードを一回だけ遊んで店を出る。

19:55 カスミオリナス錦糸町店。342 円。

* ライス
* ブラックチョコ
* 鶏肉カシューナッツ炒め・麻婆豆腐丼

20:00 セリアオリナス錦糸町店。220 円。

* 天然ゴム手袋中厚手 (M)
* まゆ毛抜き

20:20 ビッグエー墨田業平店。176 円。

* 絹豆腐 (2)
* 小粒納豆 (3)
* ジャムパン

20:30 曳舟の部屋に戻る。外の空気がなんとなく湿気を帯びているのが気になる。
食い物を全部冷蔵庫に入れ、仕事用の携帯電話の充電をオンにしてからシャワーを浴びに風呂に入る。

21:00 風呂から出て PC を開きつつ晩飯。

* [Tutorial 5 : A Textured Cube](http://www.opengl-tutorial.org/beginners-tutorials/tutorial-5-a-textured-cube/)
  * いったん圧縮テクスチャーを忘れて、通常のテクスチャーをまず再現する。
  * `Image.onload` の後にも再描画をする必要があるので、`requestAnimationFrame` 投入。
  * 本文のスクリーンショットとサイコロの面の字が異なる。UV を調整。
  * クライアント領域のリサイズで絵が歪むのをそろそろ修正したい。
    と思ったら、ビューポートだけでなく射影行列も更新しないといけないのだった。次回以降。
  * `gl.compressedTexImage2D` のラップ関数の調査で終わる。意外になんとかなりそう。

日付が変わる直前くらいで雨が窓から吹き込んでくる。明日は雨かなあ。

[DeepL]: https://www.deepl.com/translator
