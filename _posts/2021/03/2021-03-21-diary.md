---
title: 329 日目（雨のち曇り）LYNN サーバーで二体目の泥棒を見た
---

いつの間にか Twitter でコボコラを見て時間を潰している。貴重な帯域幅と時間の浪費をやめられないダメ人間になってしまった。
撮影済みビデオのトリムをしたかったが寝る。

8:05 起床。外は雨が降っている。納豆とおにぎりを食う。PC かばんを持って外出。傘をさして面接用の靴を佩用。

9:10 八広図書館。朝刊（産経、東京）を読む。キャレルに入館。ガラ空き。

* [&#x23;613 セガ マスターシステムのテーマ Sega Master System ギター - YouTube](https://www.youtube.com/watch?v=LofJeUg94Rw): 今度こそ間違いなくダウンロード。
  ギターをやらないからわからない 2 分 28 秒頃の右手の動き。
* [【麻雀ベストセレクション】金子正輝 Vol.1 - YouTube](https://www.youtube.com/watch?v=T_z5vX6ZjX0): これもビデオではあるがダウンロードしたい。
* [【FC】ドラクエ4　通常プレイで入れない場所をいろいろ歩いてみた（5章）※チートあり - YouTube](https://www.youtube.com/watch?v=N9Ejusyckiw):
  古の RPG でのイベントオブジェクトの扱い方を垣間見るビデオ。ウディターでも似たような手法を使う？

Scrapy で YouTube のページを解読できるかの試行に時間の大部分を費やす。理由はわからないが、特定のノードを拾うことができない。
これならライブラリーの理解を深めるのに時間を割くべきだった。

12:10 退館。なんでこんな時間になったのか。外は雨の量が増している。イトーヨーカドー曳舟店で体温、トイレ。

12:40 曳舟の部屋に戻る。雨で濡れたかばんを拭いて PC を所定の場所に戻す。電源を入れておやつ休憩。
しかしこの雨量が続くようなら今日のイルベロ行きは中止にしたい。目標を果たせぬまま撤去になりそうだ。らしい幕切れだ。

撮影済みのビデオファイルの整理やら編集やらをする。主にゲーム画面の収録モノ。
戦闘が長過ぎて Twitter にアップロードできるサイズに縮まらない。編集技術を一段上げないとダメだ。

14:15 眠くなってきた。雨も激しいことだし昼寝する。

16:10 起きる。雨はまだ降っているが、やはりイルベロが心配だ。外出する。
靴はいつも履いているほうに替える。傘をさして出発。東武鉄道本社側から押上駅構内に進入。
浅草線のホームへ。

東日本橋駅で降りて馬喰横山駅から小川町駅に移動。特別快速に乗らぬように注意。
小川町駅を出ると雨が激しい。なんとか秋葉原 HEY 裏側に到着。傘を畳んで二階へ進む。

イルベロ。撤去間近であることは間違いない。最悪営業中のゲーム交換まである。したがってメシを食いに行く余裕はない。
ノンストップでイルベロを 5 ゲームプレイ。ワンプレイだけ百億の女神の後ろ髪が見えた……。
とりあえずハイスコア画面も少し更新。

![百億は遠いようで遠くない]({{ "/assets/images/20210321-illvelo.png" | relative_url }})

このゲームはスコアアタックゲームの珠玉の傑作だが、一般人にそれを理解してもらうのは不可能だ。
もう私だけで楽しむしかないのだ。今回のようにせっかく出てきたのにもう店から姿を消すというのも運命。

20:30 頃か？ 退店。珍しく裏口から出る。雨はかなり収まっている。小川町駅に戻る。
地下鉄に乗っていろいろ考えながら押上駅まで移動。地下道を歩いて業平へ。

21:15 ビッグエー墨田業平店。511 円。半額ラッシュをうまく利用してミニ弁当を倍購入する。

* 絹豆腐
* 明太のり弁当
* 二色そぼろ弁当
* 大きなおむすびツナマヨ
* コロッケドッグ
* あんパン
* ドデカイラーメンチキン

21:30 曳舟の部屋に戻る。なんか暑いので空腹ではあるが入浴から先にする。

22:00 風呂から出て PC 前に戻る。豆腐やのり弁を食しつつ作業。
少し食うとなぜか体温が下がって寒く感じる。かと言って先週までのように毛布を羽織ると暑苦しい。困る。

22:40 麻雀を練習しながらの晩餐、終了。携帯電話の写真ファイルを整理する。
それから Scrapy の続きか。

23:15 Scrapy の設定仕様チェック終わり。少し休んでから[ウルファールのサンプルゲーム with DTC][bshf21b] をやる。
倒していないで放置していた強敵を倒しに行くが、物を盗みまくっていたせいで誰が生き残っているのかわからなくなってしまった。
こちらもウロウロしないといけなくなって悲しい。

## Scrapy Note

### 設定

Scrapy の動作をカスタマイズするための設定方法について記す。

#### 設定モジュールを指定する

環境変数 `SCRAPY_SETTINGS_MODULE` に `myproject.settings` のような Python モジュールのパス書式に従う文字列を指定すると、
どの設定を使うのかを Scrapy に教えることができる。そして、この指定モジュールは Python 標準の検索パスに存在する必要がある。

#### 設定を仕込む

色々な仕組みを使って設定を仕込むことができる。それぞれ異なる手続きをとる。
優先度の高い順に次のようになる：

1. コマンドラインオプション
2. スパイダー別の設定
3. プロジェクト設定モジュール
4. コマンド別の既定の設定
5. 既定のグローバル設定

コマンドラインオプションが最も優先度が高い。その他の手段による設定内容を上書きする。
これには `-s KEY=VALUE`, `--set KEY=VALUE` の書式により指定する。

スパイダー別の設定とは、次のように自作スパイダークラスのフィールドに
`custom_settings` を辞書で与えることで指定するものをいう。

```python
class MySpider(scrapy.Spider):
    name = 'myspider'

    custom_settings = {
        KEY: VALUE,
    }
```

プロジェクト設定モジュールとは、Scrapy プロジェクト内にあるモジュール `settings.py` を指す。
なければそれを作成して編集することができる。

前述の Scrapy ツールコマンドそれぞれには固有の既定の設定があり、グローバル設定を上書きする。
そのカスタムコマンドの設定をコマンドクラスの属性 `default_settings` に指定する。

グローバル既定設定はモジュール `scrapy.settings.default_settings` にある。

#### 設定にアクセスする方法

スパイダークラス内からは `self.settings` を通じて設定を利用することができる。
これは `__init__()` が終了してから有効になることに注意すること。

#### 組み込み設定項目

面白そうな項目をいくつかピックアップしておく。

* `DOWNLOAD_DELAY`
* `DOWNLOAD_MAXSIZE`
* `LOG_ENABLED`, `LOG_LEVEL` などログ関連
* `RANDOMIZE_DOWNLOAD_DELAY`
* `USER_AGENT` の既定値は Scrapy であることが明白な文字列だ。

[bshf21b]: https://wodifes.net/game/show/446
