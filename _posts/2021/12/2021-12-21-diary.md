---
title: 604 日目（晴れ）火曜の現場はいずれ爆発するだろう
---

他人のコードの `float` 型を `vec2` 型に置き換えて処理速度を倍にできた。そう信じていたい。

* [イカゲーム - YouTube](https://www.youtube.com/watch?v=hDRxsp4SX1g): 黒イカ。
  このチャンネルのビデオを視聴し過ぎたのか、黒イカの譜面を途中まで憶えてきた。
* [Avoiding Shader Conditionals](https://kv47.in/2017/07/12/ae80bd04-9ce1-4d57-b99f-4bb6feaa1c9d):
  簡単な `if` 文ならこの手でしのげる。
* [冬のアクションゲーム祭り'21-'22　hamami vs アラビアンマジック　2021/12/20 - YouTube](https://www.youtube.com/watch?v=nLuAvFlcN98):
  寝る前に観るのにちょうどいい感じの雰囲気のビデオゲーム。

2:10 消灯。

7:05 起床。納豆とコロッケバーガーを食す。流しが汚れているのが気になる。出勤。

7:45 現場。火曜なので作業フルコース。さらに大量の謎の木片。裏庭には猫の糞まである。
ゴミを処理していると未使用の使い捨て手袋を大量に発見。横領する。

10:45 撤収。

イトーヨーカドー曳舟店。体温チェック。

曳舟の部屋。洗濯をしないと。合間に GLSL のコード修正。

* [if statement - GLSL - optimize if-else - Stack Overflow](https://stackoverflow.com/questions/47597588/glsl-optimize-if-else):
  欲しい知恵そのものが記されている。`step` は思いついたが `mix` と合成するとは思わなんだ。
  線形補間関数を分岐に援用するとは。

```glsl
float b = texture2D(t, texCoord).r;

float s = 0.0;
if (b > 240.0) s = b - 2322.2;
else if (b > 90.0) s = b - 74.0;
else if (b < 10.0) s = b / 10.0;
else s = b - 10.0;

// b |         10.         90.         240.
// s | b / 10.     b - 10.     b - 74.      b - 2322.2
float s = mix(
    mix( b/10.0, b-10.0,   step(10.0, b) ),
    mix( b-74.0, b-2322.2, step(240.0, b) ),
    step(90.0, b) );
```

Twitter をチェックしたら FFmpeg の有力な情報をもらっている。通りすがりの人の書き込みも歓迎だ。
`-vf` オプションの `mpdecimate` コマンドで重複フレームを除去してくれるそうだ。
しかし、あいにく手許のビデオファイルは手動で短くしているので効果が確認できない。

12:20 興が乗っておやつが遅れる。

12:30 来客。明治のセールスマン。販促という名目でタダでヨーグルトやら何やらをくれる。
悪いね。ちょうどスプーンがあるし好都合だ。夜にとっておく。

* [昭和の歌謡・ポップス集 - YouTube](https://www.youtube.com/watch?v=5rYSwy2fwQ4)
* [mix - OpenGL 4 Reference Pages](https://www.khronos.org/registry/OpenGL-Refpages/gl4/html/mix.xhtml):
  第三引数に `bool` 系オブジェクトを渡せることが判明。
  ただし `true` のときに第二引数を返すので三項演算子の感覚だと失敗する。注意。
  これで `step` 呼び出しは不要となった。
* [【ゆっくり実況】バンダイのキャラゲー　ドラゴンボール神龍の謎をノーデスで救いたい - YouTube](https://www.youtube.com/watch?v=rAk_--ZxZkY):
  こういう内容なのか。鳥山先生描き下ろしキャラを見たい。
* [ボニュー (ぼにゅー)とは【ピクシブ百科事典】](https://dic.pixiv.net/a/%E3%83%9C%E3%83%8B%E3%83%A5%E3%83%BC):
  「鳥山先生描き下ろし」で検索したら発見してしまった。確かに鳥山先生の頭の中からしか出て来ないキャラだと思わされる。

14:00 コード掃除が進まなかったが昼寝したい。

16:35 起床。外出。

スカイツリータウン二階。三省堂書店で週刊ニューズウィーク日本版をチェック。
トイレに行って踏ん張る。

押上駅バス停。バスに乗り錦糸公園前で降りる。

17:30 オリナス錦糸町二階。ベンチで休憩。

18:00 タイトー F ステーションオリナス錦糸町店。MJ プロ卓東風戦 5 クレ。
単純に同卓者が強くて苦戦続きとなる。私の親番で二巡目でリーチが入り、さらに対面から追っかけリーチ。
それを運だけでホンイツ一通の白単騎で対面からロンアガリ。面白かった。

```text
【SCORE】
合計SCORE:-15.6

【最終段位】
四人打ち段位:覇王 幻球:9

【12/21の最新8試合の履歴】
1st|--*--*--
2nd|--------
3rd|**-**--*
4th|------*-
old         new

【順位】
1位回数:2(25.00%)
2位回数:0(0.00%)
3位回数:5(62.50%)
4位回数:1(12.50%)
平均順位:2.63

プレイ局数:38局

【打ち筋】
アガリ率:18.42%(7/38)
平均アガリ翻:4.14翻
平均アガリ巡目:9.86巡
振込み率:15.79%(6/38)

【12/21の最高役】
・跳満
```

20:00 カスミオリナス錦糸町店。342 円。

* オクラナス丼
* アジフライ
* ブラックチョコ

20:20 ビッグエー墨田業平店。301 円。

* 絹豆腐
* おかかご飯おにぎり (2)
* しょうゆヌードル
* 大きなりんごデニッシュ

20:30 曳舟の部屋。入浴。

21:05 風呂から出て PC を起動。晩飯。

* [&#x23;690 がんばれゴエモン　とにかくかっこいい曲スペシャル ganbare goemon BGM ギターメドレー - YouTube](https://www.youtube.com/watch?v=fcJ-plUHX0o):
  このチャンネルといえばゴエモン。

コード修正がだいたい終わる。`git diff INITIALVERSION HEAD file.js` でコードレビュービデオを撮影したいが、
差分表示が VS Code に現れない。`$HOME/.gitconfig` は設定済みだがなぜだ。それはコマンドが違うから。

```console
bash$ git difftool INITIALVERSION HEAD file.js
```

これが正解。VS Code のコンソールから実行すると、そのウィンドウ内にビューが出現する。

23:55 キャプチャーと FFmpeg コンバート処理終了。Twitter にバックアップして今日は終わり。
