---
title: 421 日目（曇りのち晴れ）よく寝るものだ
---

VS Code の WSL Remote のダウンロード病がまたぞろ始まってしまう。
いったんこの状態になるとファイルの編集ができなくなる。テザリングが遅いのでプログレスバーの伸びがカタツムリ並みに遅い。
諦めて寝る。

9:30 起床。洗濯機を回して朝食。納豆とおにぎり。携帯電話でニュースをチェックしてから PC を開く。
ゆうべの病気は VS Code の MRU をクリアして Open Folder からエクスプローラーごしに WSL 内のディレクトリー指定したら出なくなる。
このパターンは初めてだ。ここまで日記を書いたところで、逆に WSL Remote を更新しなくてほんとうに済むのか不安になる。

WSL のコンソールからコマンド `code` でこのディレクトリーを開く。すると GUI と同じようにダウンロードが始まる。
ただし、進捗がパーセント表記されている。こちらのほうがありがたい：

```console
bash$ code .
Updating VS Code Server to version 507ce72a4466fbb27b715c3722558bb15afa9f48
Removing previous installation...
Installing VS Code Server for x64 (507ce72a4466fbb27b715c3722558bb15afa9f48)
Downloading:  18%
```

洗濯物を干す。

* [An intro to modern OpenGL][duriansoftware]
  * 3D transformation and projection
    * hello world を立体的に描画するように改造する。
    * シェーダーコードを記述したテキストファイルのパスをコマンドラインから受け取るように改造する。
    * GLUT にタイマーがある。`glutGet(GLUT_ELAPSED_TIME)`
    * > `position.xy` picks out as a `vec2` the first two elements of our now four-component position vector.
    * GLSL 部分を外部ファイルに出すことで C のコンパイルと分離した。
    * 投影空間の復習
    * > GLSL provides 2×2, 3×3, and 4×4 matrix types named `mat2` through `mat4`.
    * 線形変換はラスタライザーの線形補間と相性が良い。
    * GLSL コードで行列をコンストラクターで記述する際には、列ベクトルを順に与えることに注意。
      エディター画面上では転置行列の成分を並べて書くような感じがする。
    * Scaling to fit the aspect ratio の方法論は感心しないが、拡縮変換の説明のためにやっていると解釈しよう。
    * 投影行列はめったに変更されないのが普通。
    * 透視変換を自分で書く。その結果、テクスチャーマッピングが絵に合わなくなる。透視変換が線形でないからだ。
    * さきほどの手製の透視変換で用いた除数が、透視変換で使う距離の線形関数であることが急所だ。
      同次座標系を導入して、この除数をベクトルの追加成分として保存すれば、透視変換を線形変換として適用することができる。
      その結果、ラスタライザーは除数が適用される前にテクスチャー座標を正しく線形に補間することができる。
      * さっきのダメな方法はこれを説明する役割があった。
    * 同次座標系は並進変換の行列化にも意味がある。
    * 旧 `glFrustom` を自作するわけだが、このコードでは画面アスペクト比を y 軸に反映させていることに注意。
    * モデルビュー行列は通常フレーム間で変更され、頂点のセットに適用される。
      これらの行列を事前に計算し、uniform や attribute としてシェーダーに与える方が効率的だ。

10:25 VS Code Server のインストールが終了する。

11:10 行列の章を終わる。GLSL で行列演算コードを書けるというのが大きいようだ。
次の章は別のプログラムを書くようなので、いったん打ち切って WebGL 化でもする？

インターネットでニュースと天気予報とハローワークをチェック。

11:25 いったん気分転換のため外出。イトーヨーカドー曳舟店で体温チェックとトイレ。
コンビニに行こうかと思ったが、昼休みの邪魔になるのはマズイ。やめる。

11:55 曳舟の部屋に戻る。拡張のインストールがまだ終わっていない。

* [【悲痛な手牌】Mリーガー村上淳の窮地【麻雀】 - YouTube](https://www.youtube.com/watch?v=Nmp_lGA4M4U):
  なんという悲境。最後二萬が対子になって危険度が高く見えてしまう。
* [秋のシューティング祭り 第2戦　「コットン」 - YouTube](https://www.youtube.com/watch?v=F06u4K2lg50)

13:00 コットンを観ながらおやつ。

* [第6回　グラディウス部部活動「沙羅曼蛇2」 - YouTube](https://www.youtube.com/watch?v=N96JdScUZek): テトランまで視聴。

メールチェック。面接の時刻を確認。スペースキーの効きが悪い。

14:15 気が遠くなったので寝る。

16:05 あまりの暑さに起き上がる。濡れタオルをかぶって外出。
押上駅バス停に移動。ここは日よけが微妙に足りなくて頭に日光が当たる。錦糸公園前までバスで移動。

17:20 時間が余っているのでブックオフロッテシティー錦糸町店へ。
『白竜』コンビニ本と『でろでろ』の相原姉妹の出番が多い巻をチェック。
さすが押切先生。中野ブロードウェイ四階のシャッター商店街状態の魅力をすでにご存じだった。

18:00 タイトー F ステーションオリナス錦糸町店。MJ プロ卓東風戦 4 クレ。
今日は普通。私はテンパイが遅いのでダマで行くほうが安定するのか。

```text
【SCORE】
合計SCORE:-2.8

【最終段位】
四人打ち段位:伏龍 幻球:10

【6/21の最新8試合の履歴】
1st|-*--*---
2nd|--*-----
3rd|-----*-*
4th|---*--*-
old         new

【順位】
1位回数:2(28.57%)
2位回数:1(14.29%)
3位回数:2(28.57%)
4位回数:2(28.57%)
平均順位:2.57

プレイ局数:38局

【打ち筋】
アガリ率:21.05%(8/38)
平均アガリ翻:3.38翻
平均アガリ巡目:9.13巡
振込み率:5.26%(2/38)

【6/21の最高役】
・倍満
```

しかし次の画像の局だけは明らかにリーチの場面。三軒リーチをするのは久しぶりだ。
上家から三索一発ロンで倍満。回していたら手が高くなるという流れが良かった。

![渾身の三軒リーチ一発ロン]({{ "/assets/images/20210621-mj.net" | relative_url }})

閉店間際にビートマニアの STANDARD モードをプレイ。

20:05 カスミオリナス錦糸町店。327 円。クーポン使用。

* 生姜焼き丼
* ブラックチョコ
* ライス

20:25 ビッグエー墨田業平店。324 円。

* 絹豆腐 (2)
* スライスチーズ (5)
* 大きなコロッケバーガー
* コッペパンホイップ＆チョコ

20:30 曳舟の部屋に戻る。シャワーをさっと浴びて出る。豆腐を食いながら PC を開く。
今度は N キーが効かない。食いながらキーボードを叩くからカスが隙間に入り込むとでもいうのか。

21:40 麻雀の練習終了。流しを片付けてからインターネットへ行く。

22:30 巡回終了。サラマンダ 2 の続きを再生しつつ WebGL をやろう。

* `glGenBuffer` は `createBuffer` なるもので置き換わる。
* PyOpenGL と引数の省略方針が似ている。配列とサイズを同時に引数に取るようなものはない。

[duriansoftware]: https://duriansoftware.com/joe/an-intro-to-modern-opengl.-table-of-contents
