---
title: 559 日目（曇り）睡眠時間の調整に失敗
---

[WebGL2 Fundamentals] の `m4.lookAt` が返す行列は、同じ引数を
[glMatrix] の `mat4.lookAt` に対して呼び出して得られる行列の逆行列だ。
これは本文で言及していた。そこだけ気をつければ普通に置き換えられる。

[【解禁進めつつ】伸ばしたい曲いっぱい。CastHour IIDX定期配信 &#x23;137【音ゲー / beatmania IIDX / DOLCE.】 - YouTube](https://www.youtube.com/watch?v=3NEqPSf_qXQ):
今回は自然にプレイしている。

1:00 格子模様の平面を描画しようとして頓挫。市松模様なら簡単だが線が関係すると難しくなる。

3:00 就寝。しかし寝付けない。理由不明。

10:15 寝ていたのかどうかあやしいが起床。洗濯。納豆とおにぎりを食いつつ洗濯機が終わるのを待つ。
携帯電話で時間を潰せるのがいい。これのおかげで暇な時間がまったくなくなった。

洗濯物を干して PC 作業をやる。

12:50 JavaScript のコードで難航。イベントハンドラーの定義方法が誤っていたのになかなか気づかず時間を無駄にする。
[WebGL2 Fundamentals] のボウリングのデモで書いたシーン回転のコードをクラスにカプセル化するときに一度失敗していたが、
今回は成功しそうだ。

```javascript
// not work
window.addEventListener('mousemove', this.rotateCamera);

// works
window.addEventListener('mousemove', e => this.rotateCamera(e));
```

寝不足だとこういうまともでない失敗をする。

あと、市松模様のテクスチャーデータ生成もバグっていた。
寸法を 4x4 から 8x8 に変更するだけで簡単に模様が狂う。リテラルを定数に置き換えるのが漏れた。

13:10 YouTube で昭和歌謡を聴きながらおやつ休憩。70 年代にはまだ知らぬ宝石があるはずだ。

14:40 いったん軽く昼寝。

夕方起床。時刻未確認。外出。

スカイツリータウン二階。トイレ。

押上駅。地下鉄を乗り継いで船堀駅に移動。

17:30 セガ船堀店。MJ 第一回金ドラ杯予選 B 東風 5 クレ。
今日は地味な成績になった。

```text
合計スコア 20.0
平均スコア 1.67

平均順位 2.50 着
トップ 3 回
二着 2 回
三着 5 回
ラス 2 回

アガリ率 15.09% (8)
アガリ飜平均 4.25
アガリ巡目平均 11.88 巡
振り込み率 9.43% (5)
```

20:00 退店。遅くなったので近場で買い物を済ませることにする。

20:25 イオンフードスタイル船堀店。654 円。コロッケコッペ 50 円がありがたい。二つ買っても良かった。

* 牛カルビガーリックペッパーライス
* アジフライ
* コロッケコッペ
* コッペパンジャム＆マーガリン
* ブラックチョコ (2)

船堀駅。地下鉄を乗り継いで押上駅に移動。
携帯電話で Twitter をチェック。隣の路線の東西線門前仲町駅で刃物男事件があったようだ。
タイムラインをスクロールしていると、某フォロワーサンがその地上周辺の写真を投稿していた。
たまたまなのか、それともニュースを聞いて駆けつけたのか。

地上に出てそのまま曳舟の部屋に戻る。

シャワーから。風呂を出て服を着て PC を点灯して晩飯。

* [ラスベガスで5－10－20ドルのキャッシュゲームに挑戦 - YouTube](https://www.youtube.com/watch?v=xAbriUPB1so)

WebGL 学習続き。手動ズームの準備。マウスの上下でズームイン・アウトをする。回転とは何かキーが押されているかどうかで区別する。
Ctrl でいいか。

回転処理クラスとズーム処理クラスを兄弟クラスに設計し直す。今までのを処理クラスを持つクラスに作り変える。
State パターンだ。

* [秋のシューティング祭2021 ファラオ佐々木 vs アルファックスZ - YouTube](https://www.youtube.com/watch?v=lg4i6JG4amA):
  えらく古風なプログラムだ。がんばればこの水準のゲームを実装できるか。

[WebGL2 Fundamentals]: https://webgl2fundamentals.org
[glMatrix]: https://glmatrix.net/
