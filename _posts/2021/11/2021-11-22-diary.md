---
title: 575 日目（雨時々曇り）カレイの唐揚げが美味い
---

それにしても WebGL の学習が遅々として進まない。じっくりと理解しようとし過ぎているか。
Triad の組み込みがテキスト作業になっているのはマズイ。あと 3 デモくらいある。

気分転換に MJ.NET の入手アイテムの NEW マークを外す作業をする。

`glPushAttrib deprecated` で検索して調べる。OpenGL でも事情は同様か。
ということは昨日のコードで正解だ。ダサいが。

2:40 消灯。

9:35 起床。雨はやんだか。シャツを着替える。納豆とおにぎりを食う。気分転換に外出。

イトーヨーカドー曳舟店。体温チェック。

ひきふね図書館。月刊文藝春秋 2021.12 号の残りを読む。日本沈没の記事。シン・ゴジラへの言及が面白い。
蓋棺録にはさいとう・たかお先生とすぎやまこういち先生が。あとは朝刊各紙一面だけチェックして退館。

11:25 曳舟の部屋。PC を起動。WebGL の自作 Triad を色々試す。
かなりの不具合がある。少しずつバグを潰す。
`glLookAt` の `viewMatrix` の translation 部分を適宜処理しないとダメだ。
手を抜かずにあらかじめ計算しておけばクリアできる。

* [【11月20日】2021年は配信で！20,November一通りやってく5鍵配信【音ゲー / beatmania / DOLCE.】 - YouTube](https://www.youtube.com/watch?v=yMQsDUUHTWM):
  今回は PS 起動音のみからの開幕で厳かな雰囲気だと思ったら、単に DOLCE プロのマイクが入っていないだけだった。

13:20 おやつ休憩。

14:50 寝る。

16:40 起きる。まだ雨が降っている。仕方がないから外出。

押上駅バス停。バスに乗って錦糸公園へ移動。

17:25 オリナス錦糸町。二階トイレで用を足す。腸に何かが随時詰まっている。
窓際ベンチで携帯電話を見つめて情報収集。

18:00 タイトー F ステーションオリナス錦糸町店。MJ プロ卓東風戦 5 クレ。
今日は珍しく頑張ったのだが、要所で致命傷を負うミスを頻発して赤字。

```text
【SCORE】
合計SCORE:-68.8

【最終段位】
四人打ち段位:覇者 幻球:8

【11/22の最新8試合の履歴】
1st|------*-
2nd|-*-*-*--
3rd|--*-----
4th|*---*--*
old         new

【順位】
1位回数:1(12.50%)
2位回数:3(37.50%)
3位回数:1(12.50%)
4位回数:3(37.50%)
平均順位:2.75

プレイ局数:40局

【打ち筋】
アガリ率:20.00%(8/40)
平均アガリ翻:3.25翻
平均アガリ巡目:13.00巡
振込み率:17.50%(7/40)

【11/22の最高役】
・跳満
```

19:55 カスミオリナス錦糸町店。320 円。

* 八宝菜丼
* カレイの唐揚げ

外に出ると雨がだいたいやんでいる。

20:15 ビッグエー墨田業平店。280 円。

* 絹豆腐
* カレーヌードル
* コッペパンブルーベリー

20:30 曳舟の部屋。仕事の」携帯電話の充電を仕込んでシャワーを浴びに行く。
風呂から出て PC を開く。晩飯。カレイ美味い。

麻雀の練習を終えたら、さっき風呂で思いついた行列操作の最適化を検証する。
以前から気になっていた「逆行列を取ってから転置行列を取る」が妙に感じる点を少し進めたい。
最近、この手の処理をするときに、対象の四次正方行列の左上三次小正方行列がほとんどの場合直交行列であることに気づいた。
ということは、「元の行列が並進移動を含まない」ならば、このまどろっこしい操作が恒等変換になる。

一方、[glMatrix] をよく調べると `mat3.normalFromMat4` という関数が用意されている。

> Calculates a 3x3 normal matrix (transpose inverse) from the 4x4 matrix

と述べられているので、そういう需要はあるらしい。とりあえず自作のコードを検証する。

正多面体をアニメーションさせるデモで行列をダンプして検証する。私が正しいようだ。

22:40 自作コードすべての `u_worldInverseTranspose` を `mat4` から `mat3` に修正する。
併せて `mat3.normalFromMat4` を活用する。

* [帝放浪記グリーン牧場探訪　&#x23;007 - YouTube](https://www.youtube.com/watch?v=5YqeZm0Oc_E):
  ポコニャン。
* [秋のシューティング祭り2021　-Z-vsグロブダー　2021/11/22 - YouTube](https://www.youtube.com/watch?v=9VRKS8tS5tM):
  知らないゲームだが 86 面とか言っているので危険な作品だというのは薄々わかる。

23:25 Triad の既存デモへの組み込み作業が終わる。録画して Twitter に投稿したい。

あとは YouTube を極細回線で楽しもう。グロブダーが終わった。72 面と伸び悩んだか。
もっともプレイヤーはやる気マンマンのようなので次回に期待だ。

[glMatrix]: https://glmatrix.net/
