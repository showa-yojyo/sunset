---
title: 189 日目（晴れのち曇り）いきなり足立区舎人一帯を散歩
---

地獄の伯爵令嬢の逆襲を通しでやっている続き。キラーバレリーナにチェインライトニングが効き過ぎる？
条件を忘れたが 1600 からダメージが入る。

0:55 ラスボス前まで進めて終了。寝る。アルミシートを実験的に寝床の段ボールの上に敷いてみる。

10:05 起床。朝が寒くて起きられない。朝飯を食って掃除をして外出。
明治通りに出て東向島広小路からバスに乗って荒川三丁目まで移動。公園で水を汲もうと思ったら忘れて図書館まで行ってしまう。

11:15 ゆいの森あらかわ入館。日曜なので満席。新聞（産経）や週刊文春を読んで待つこと一時間。三階の席が一つ空く。

やったことは Cygwin の `chere` をインストールしただけ。VS Code の C++ 環境構築がほとんど進まない。後退したのかもしれない。

13:20 新聞（東京）を読んで退館。荒川七丁目まで歩いて都電荒川線に乗車。
熊野前で降りて舎人ライナーに乗って舎人駅まで移動。近くの児童公園でおやつ休憩。

足立区舎人図書館に入館。区民センター全体が工事中で写真が撮れない。
朝刊（朝日）と月刊 I/O を読んで退館。

足立区のこの辺はよくわからない。以前ホームレスのときに一度歩いた記憶をもとに舎人公園北通りを入谷七丁目方面に歩く。
ウェアハウス入谷店がある。中は広いゲーセン。麻雀コーナーを見たら MJ がワンクレ 50 円。23 区内最安。
第 12 回幻球乱舞東風部門を 10 クレ遊ぶ。

```text
合計スコア -212.7

トップ 2 回
二着 6 回
三着 3 回
ラス 6 回

アガリ率 16.47
アガリ飜平均 2.14
アガリ巡目平均 9.79
振り込み率 10.59%
```

この前の私に対してイヤなチャットを連発するプレイヤーにまたぞろ同卓。しかもこの前と台詞が違う。芸の細かいヤツだ。
しかし卓外戦術とは異なって麻雀は姑息なことをするわけではなく、むしろ堂々としているから性格がよくわからない。
私に対してもふつうに危険牌を切ってくる。おかげで棚ぼたトップを獲れた。

夜になって退店。人家のない道路をひたすら戻って尾久橋通りに着く。南に歩いて（これは間違い）舎人公園駅。
舎人ライナーに乗って日暮里まで移動。駅前のバスが良くわからなかったが、いつもの亀戸駅行きを発見して無事東向島広小路に到着。

21:05 東武ストアフレッシュ＆クイック。722 円。

* 鶏そぼろ弁当
* 豆大福
* 野菜ジュース (900)
* 白飯

21:10 曳舟の部屋に戻る。入浴して割とすぐに上がる。日記と出納帳を書いて晩飯。
そういえば昨晩遅くに携帯電話の通信速度制限が終わったようなので、テザリングで Twitter などをやる。
さっきバスの Wi-Fi でさんざん見てはいるのだが。

C++11 の学習。もう大事なものは残っていないか？
TLS から UTF-8 encoding まで学習。

23:20 地獄の伯爵令嬢の逆襲。レベル 41 でラスボス戦全滅。もう一丁行くか？

23:50 4 回目の挑戦でやっと倒した。何度やっても安定しないラスボス戦の完成度の高さに感服する。
テストプレイも兼ねていたのだが、私によるコード変更は問題を生じていないようだ。

## C++11 Notes

C++11 の学習をすすめる。[cpprefjp] の見出しに沿って進めているので今日はマルチスレッドから。

### スレッドローカルストレージ

〈変数宣言の際に、記憶域として `thread_local` キーワードを指定することで、スレッドごとの静的記憶域に変数が保持される〉
ので、このような変数は `static` であると考えるほうが理解しやすい。スレッド別に `static` なわけだ。

乱数のほうのサンプルコード、改行文字を出力するコードを `<< std::endl` に書き換えて実行すると面白いことに改行されない。

### ブロックスコープを持つ `static` 変数初期化のスレッドセーフ化

`static` 変数の初期化のときに暗黙的にロックがかかるようになったと解釈してよいだろうか。

### 戻り値の型を後置する関数宣言構文

従来の関数宣言文法に加え、戻り値の型をとりあえず `auto` と書いておいて、
パラメーターリストの後に `->` を書いて最後に戻り値の型を（おそらく間接的な形式で）書く文法が追加された。

### コンパイル時アサート

`static_assert()` が言語レベルでサポートされるようになった。Boost にあったものが標準に昇格したのだろう。

さっそく使わせてもらっているが、コンパイルオプションによっては第二引数を与えなければエラーになる。
例えば `g++` ならば `-std=c++17` が必要。

### 生文字列リテラル

Python でいう `r'...'` に相当する仕様。ユースケースも同じ。
C++11 では `R"(...)"` という形で書く。括弧については変種を許す。

### UTF-16 と UTF-32の文字型

使いにくそう。

* C++11 では新しく組み込み型 `char16_t` と `char32_t` が加わる。
* `u"..."` と `U"..."` でそれぞれ `char16_t` 型配列と `char32_t` 型配列のリテラルを宣言できる。

等々。Unicode の知識が要る。

### UTF-8 文字列リテラル

`u8` プレフィクスを付与した文字列リテラルがあるとする。これはコンパイル時に UTF-8 に符号化される。

[cpprefjp]: https://cpprefjp.github.io/
