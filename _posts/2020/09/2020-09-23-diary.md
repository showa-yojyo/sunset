---
title: 150 日目（雨のち曇りのち雨）転居後の仕込みができない
---

さっきから雨が降り続いている。台風が木曜辺りにここに来るそうなのでしのげるかどうか。
幸いこの日だけはタスクが掃除くらいしかない。とにかく今日は寝る。

8:15 起床。おにぎり一個の朝飯。8:45 外出。曇り空の隅田公園で佇む。
連休でひどいことになっているゴミ箱周辺を業者が全力で片付ける様子を見届ける。

9:00 区役所に移動。福祉事務所で担当職員に現金受取の確認をしたかったが、本人不在。
受け取り時間の変更というだいじな話なのだが、代わりの職員で話が通じる。
急いで不動産屋に電話。営業時間前なので留守番電話だ。とりあえず打ち合わせがうまくいったことを報告しておく。

9:40 向島の部屋に戻る。洗濯。テレビと PC で時間を潰す。

WOLF エディターのサンプルの残骸を少しプレイしたり、デバッグフロアを眺めたりする。
戦闘終了後にフリーズするので、ワープイベントをコピーして自由自在に往来できるように改造する。

風呂掃除を少し進める。落とせるカビを落とす。

CSS Selector の仕様書を読む。スクレイピングのコードなりコマンドラインなりを書くのにこの知識が深いと有利だ。

13:05 天気が怖いが外出する？ いつものルートで業平方面へ。

14:00 ビッグエー墨田業平店。193 円。

* ふっくらおむすび鮭バター
* ハムマヨパン
* パンケーキメープル＆マーガリン

横川五丁目の集合住宅の軒下で立ち食い。立体駐車場にベンツを入れている老人を眺めながら。

横川コミュニティー会館図書室。朝刊と情報処理関係の書籍を読む。

徒歩でハローワーク墨田に移動。検索だけする。応募しても文句の言われない事業所にブックマークをしておくだけでも後の復帰が楽になるはずだ。

オリナスへ移動。雨が降ってくる。携帯電話をチェックしてからゲーセンへ。

タイトー F ステーションオリナス錦糸町店。5 クレほど気分転換。
ビートマニアは ARENA が閉鎖して単なる練習モードと化す。
MJ プロ卓東風戦。私が小考していたら専用チャットで文句を言ってくる上級者と同卓。
小うるさいのが来たなと思ったら、オーラスで彼も小考するではないか。悪い奴だ。
何ゲームか間にはさんで再度同卓したときにラスへ落とせてようやく溜飲も下る。

```text
【SCORE】
合計SCORE:+28.9

【最終段位】
四人打ち段位:雷神 幻球:8

【9/23の最新8試合の履歴】
1st|-----**-
2nd|---*----
3rd|-**----*
4th|----*---
old         new

【順位】
1位回数:2(28.57%)
2位回数:1(14.29%)
3位回数:3(42.86%)
4位回数:1(14.29%)
平均順位:2.43

プレイ局数:31局

【打ち筋】
アガリ率:16.13%(5/31)
平均アガリ翻:4.20翻
平均アガリ巡目:8.40巡
振込み率:3.23%(1/31)

【9/23の最高役】
・跳満
```

18:40 カスミオリナス錦糸町店。これが引越し前ラストの買い物になる可能性が半分くらいある。328 円。チャーシュー炒飯。

19:05 ビッグエー墨田業平店。133 円。

* シュークリーム
* レーズンロール (4)

雨がやんだので、例の電話ボックスに寄り道して撮影。手ブレがひどくて使い物にならない。
そういえば Wi-Fi を使えるのだ。携帯電話の OS をアップデートしておこう。
データをダウンロードして更新が始まったところで去る。

向島の部屋に戻る。まだ更新の終わらぬ携帯電話を放置してシャワーを浴びる。浴室がまだ汚い。
出て晩飯。携帯電話の再起動がやや不安定で怖い。

20:30 PC タイム。

21:00 地獄の伯爵令嬢の改造で遊ぶ。マップの改造方法を習得した。島を全部地続きにする。
それにしてもレベル 99 でもコロナをかけたうさぎに攻撃ミスをするのか……。

WOLF エディターのマップ編集モード、undo の回数が少な過ぎる。あろうことか redo もないし。

ハードモードを設計しよう。

* メインメニューから「ソウル交換」削除
* レベル上限 45

23:00 CSS に戻る。簡単な HTML と CSS を書いて実践してみる。もう知っているから 20 分やって飽きる。
地獄の伯爵令嬢の敵データを観察する。ビューワーの使い方がまだ理解し切れていない。

## Notes on CSS Selectors

レベル 1 から順にチェックシートを作ろう。これらのパターンは仕様書を読む前に知っているはずのものだ。

### Level 1

* `E`: 文書中の `<E></E>` を指定する。
* `E.warning`: 文書中の `<E class="warning"></E>` を指定する。
* `E#myid`: 文書中の `<E id="myid"></E>` を指定する。

問題：複数の `class` に属する要素を指定するパターンは？

* `E:link`: 要素 `E` がハイパーリンクであって、リンク先が unvisited であるようなものを指定する。
* `E:visited`: パターン `E:link` の visited 版。

ここまではふつうの CSS を書くときにも頻繁に指定するものなので馴染みがある。
むしろスクレイピングではこのような interactive 関連パターンは使わないはずだ。

* `E:active`: 要素 `E` であって active であるものを指定する。

ただし、何をもって要素が active であるのかを決めるのかは要素によって異なるだろう。

* `E F`: 要素 `F` であって要素 `E` の子孫であるもの。

仕様書の説明によれば `F` が `E` の子である必要はないようだ。孫でもひ孫でも可。

以上がレベル 1 仕様として定められているパターンだ。

### Level 2

レベル 2 から要素の属性に対する条件を指定できるようになる。

* `*`: すべての要素を表す。これは単体で用いるのではなく、他のパターンと組み合わせて用いる。
  * ただし `*.warning` や `*#myid` はそれぞれ単に `.warning` や `#myid` と書ける。

* `E[attr]`: 要素 `E` であって、属性 `attr` を有するものを指定する。
  * 例：`h1[title]`
* `E[attr="value"]`: 要素 `E` であって、属性 `attr` の値が `value` に厳密に等しいものを指定する。
  * 例：`span[class="example"]`
  * 例：`span[hello="Cleveland"][goodbye="Columbus"]`
  * アルファベットの大文字小文字オプションもあるが割愛。
* `E[attr~="value"]`:
  要素 `E` であってその属性 `attr` の値が空白文字区切りの文字列パターンであるとする。
  `value` がそのいずれかの「単語」に厳密に等しいものを指定する。
  * 例：`a[rel~="copyright"]`: 要素 `a` であって、属性 `rel` の値が例えば
    `"copyright copyleft copyeditor"` であるならばマッチする。
* `E[attr|="value"]`:
  要素 `E` であってその属性 `attr` の値が厳密に `value` に等しいか、あるいは
  `value` の直後に `-` が続き、任意の文字列が続くというパターンであるものを指定する。
  * 例：`a[hreflang|="en"]` がマッチするのは次のような要素だ：
    * `<a hreflang="en"></a>`
    * `<a hreflang="en-US"></a>`
    * `<a hreflang="en-scouse"></a>`

次はスクレイピング向けではない：

* `E:hover`
* `E:focus`

最後に木構造に関わるものを挙げる。上下方向と横方向がある。

* `E:first-child`: 要素 `E` であって、別の方法で指定された何らかの要素の最初の子要素であるものを指定する。
  * `:nth-child(1)` と同値。
  * 例：`div > p:first-child`: 要素 `div` 内に最初にある要素が `p` であるならば、それを指定する。

    ```html
    <p> The last P before the note.</p> <!-- マッチしない -->
    <div class="note">
       <p> The first P inside the note.</p> <!-- マッチする -->
    </div>

    <p> The last P before the note.</p> <!-- マッチしない -->
    <div class="note">
       <h2> Note </h2>
       <p> The first P inside the note.</p> <!-- マッチしない -->
    </div>
    ```
* `E > F`: 要素 `F` であって要素 `E` の子であるものを指定する。
  * 例：`body > p`: 要素 `body` の子であるような要素 `p` すべてを指定する。
  * 例：`div ol>li p`: 要素 `li` の子孫にあたる要素 `p` すべてを指定する。
    ただしそのような `li` はいずれも要素 `ol` の子であるものとし、さらに
    そのような `ol` は要素 `div` の子孫であるものとする。
* `E + F`: 要素 `F` であって、要素 `E` と同じ要素を親として持ち、かつ `E` のすぐ次に来るような `F` を指定する。

以上がレベル 2 の使いそうなセレクター仕様だ。
