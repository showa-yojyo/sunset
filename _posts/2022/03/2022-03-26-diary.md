---
title: 699 日目（曇りのち雨）コード周りを細かく改良する
---

0:35 風呂から出る。PC 前に着席。時間的にも食事はない。メールチェックして寝るか。
やはり WebGL デモのデバッグをやる。

1:40 デバッグをあきらめる。`gl.readPixels` か `gl.frustum` がおかしいはずだ。
しかし、これらの、とくに前者の挙動を検証する手段がない。
ダンプしたいがコンソールに出力するにはデータ量が多い。ダメだ。

インターネットで探しもの。回線が細くてのんびりやるしかない。

3:00 消灯。就寝。

9:25 起床。おにぎり弁当を食う。歯を磨いて PC を開く。

10:10 WSL の `getclip`, `putclip` を書き換える。実装を function から alias にする。
これでリダイレクトやパイプをまともに利用できる。今までどうかしていた。

10:35 やっとバグを発見。驚くほど初歩的なポカだ。
配列 `Uint8Array(4 * width * height)` を 4 バイトずつ手でループするのに、添字の上限を `width * height` にしていた。

11:30 コードを浄書。ビデオ撮影を夜にやるだろう。それにしてもみっともない失敗だった。
YouTube の再生が途中のビデオを続けて視聴する。雨が降ってくる？

12:10 おやつ。

* [【驚愕】ダントツからかっぱぎリーチで10万点超えのトップ - YouTube](https://www.youtube.com/watch?v=LYPH8wDzWFM):
  けっこう前に投稿されたビデオだが、実はメモリアル回だった。
* [【ゼルダの伝説 神々のトライフォース Randomizer】今度は鍵も敵もボスも！　色々シャッフルしてみました【ゆっくり実況】 - YouTube](https://www.youtube.com/watch?v=9eNKQU3ri3I):
  途中までチェックしていたのを再開。英語を訳すのには [DeepL] を使うといいとお伝えしたい。

14:10 寝る。眠くないのに疲れているから眠れる。

19:30 起きる。そういえば風呂場の換気扇の掃除をしていないことに気づく。雨だがいったん外出。

イトーヨーカドー曳舟店。体温チェック。

気が変わって曳舟の部屋に戻る。PC を開いて細かい作業を片付ける。

20:25 Windows のタスクスケジューラーをいじる。DropboxUpdateTask から始まる名前のタスクを無効化しておく。
これは以前にも一度行ったが、また復活したところをみると不十分な対応と思われる。
安全ならばタスクの存在を削除したい。

あとは [Mermaid.JS] の組み込みをやりたい。と思いつつ YouTube を開いてしまう。

21:00 外出。まだ雨。

21:15 コモディイイダ東向島店。720 円。三食ぶん購入。

* QBB ベビープレーンチーズ (4)
* カツ丼＆深川めし風あさり丼
* 極小粒ミニ (3)
* 白飯
* 手巻きおにぎりたらこ
* あっさり CN カレーヌードル
* ホットケーキメープルマーガリン

曳舟の部屋に戻って換気扇の掃除。汗だくになる。それから入浴。

22:05 PC に戻る。YouTube を聴きながら晩飯。

歯を磨いて PC に戻る。

22:45 WebGL ピックデモを XBox Game Bar で撮影。

23:05 Twitter に投稿。私が変なことをしていたら誰かが指摘して欲しい。

23:30 [Mermaid.JS] の当ブログへの導入がうまくいくことを確認。さっそく先日のエントリーを対応する。
Jekyll ヘッダーに `mermaid: true` の変数を追加すれば、サーバーにあるスクリプトを読み込むための
`script` タグを HTML の `body` 要素の次に挿し込むように対応。

```text
---
title: 693 日目（晴れ）我々は眠いんだよ
mermaid: true
---
```

[MathJax](http://docs.mathjax.org/en/latest/) も同様の手法を採用すれば、無駄なロードを回避できるだろう。

23:50 Git 操作を少し忘れていた。マージコミットを作りたいのでやり直す。

```console
bash$ git merge branch-name
bash$ git reflog
bash$ git reset --hard sha-prev-merge
bash$ git switch master
bash$ git merge --no-ff branch-name
bash$ git branch -d branch-name
```

[DeepL]: https://www.deepl.com/translator
[Mermaid.JS]: https://mermaid-js.github.io/mermaid/
