---
title: 646 日目（晴れ）影ニキビ
---

コード修正が全然終わらない。JavaScript 部分がまだまだ汚い。
モジュールに共通変数をまとめたのはいいが、大域変数のような参照方法が残ってしまっている。
WebGL の状態機械的設計センスが伝染してしまったとでもいうのか。

二日続けて同じことをいうのは気が引けるが、[WebGL2 Fundamentals] の `m4.lookAt` の呼び出しは要注意。
今見ている Shadows のコード群のように行列がたくさん使われるプログラムでは特にだ。
コードを整理するときに呼び出しを `m4.inverse` と一緒にカプセル化してしまったほうが効率が良い。

携帯電話を充電していたのを忘れている。取り込んで仕事封筒に入れる。

* [【IIDX29】みつばと自分の曲無限にやる【CastHour】【AC配信】 - YouTube](https://www.youtube.com/watch?v=AHx63Z-KKx0):
  Gram 先生の YouTube チャンネルのゲーセン放送。黒イカのお兄サンが一緒に遊んでいる。
  ビートマニア作曲裏話がたいへん興味深い。
* [Actraiser (SNES) - 'Birth of the People' EWI Multitrack - YouTube](https://www.youtube.com/watch?v=1xXF3C1BkJ0):
  管楽。

2:35 消灯。

7:05 起床。納豆といなり寿司を食う。出勤。

7:45 現場。火曜につき仕事がいっぱいある。402 号室のゴミがデタラメ過ぎるせいで残業になる。

10:50 撤収。

イトーヨーカドー曳舟店。体温チェック。

曳舟の部屋。PC を開いて [WebGL2 Shadows](https://webgl2fundamentals.org/webgl/lessons/webgl-shadows.html)
テキスト読み直し。

* [フルコン埋めでもしながら黒イカをエクハする - YouTube](https://www.youtube.com/watch?v=bMZW7PbNEKo):
  やはり黒イカがあると納得感がある。

12:00 おやつ。コードを徹底的に見直して理解を深める。いったん projection mapping に戻らないとまずいかもしれない。

13:40 寝たい。

16:45 起床。外出。

スカイツリー展望台一階トイレ。便秘がひどくて時間がかかる。押上駅バス停へ。
錦糸町駅行きのバスに乗車。錦糸公園前で降りる。

17:50 オリナス錦糸町。もう地下に下りてしまう。

18:00 タイトー F ステーションオリナス錦糸町店。MJ プロ卓東風戦 7 クレ。
事態が全然好転しない。

```text
【SCORE】
合計SCORE:-129.4

【最終段位】
四人打ち段位:飛龍 幻球:7

【2/1の最新8試合の履歴】
1st|--------
2nd|*---*-**
3rd|-*---*--
4th|--**----
old         new

【順位】
1位回数:0(0.00%)
2位回数:5(45.45%)
3位回数:4(36.36%)
4位回数:2(18.18%)
平均順位:2.73

プレイ局数:53局

【打ち筋】
アガリ率:13.21%(7/53)
平均アガリ翻:2.57翻
平均アガリ巡目:10.86巡
振込み率:9.43%(5/53)

【2/1の最高役】
最高役のデータがありません。最高役は、跳満以上のアガリが対象となります。
```

20:30 カスミオリナス錦糸町店。384 円。

* あんかけ焼きそば
* アジフライ
* ブラックチョコ

21:05 ビッグエー墨田業平店。327 円。

* 大きなツナオニオンパン
* 小粒納豆 (3)
* 絹豆腐
* シーフードヌードル
* コッペパンチョコ＆ホイップ

曳舟の部屋。入浴。

21:50 風呂から出る。PC に戻って晩飯。インターネットで明日の面接の場所を確認。
高田馬場は遠いがバスを使えば財布を傷めずに移動できる。時間がない？

* [Shadow Acne](https://digitalrune.github.io/DigitalRune-Documentation/html/3f4d959e-9c98-4a97-8d85-7a73c26145d7.htm):
  この文書は素晴らしい。表題の現象はシャドーマッピングの限られた解像度が引き起こすものだと言っている。
  面自身が自身に影を作る。かと言って、解像度を上げると回避できるという性質のものでもない。

23:40 コード直しを終える。シャドーマッピングはツーパスレンダリングだ。
ファーストパスで奥行きテクスチャーに奥行きだけを描画する。
セカンドパスで通常のレンダリングに奥行きテクスチャーで味付けする。以上の理解でいいだろう。
座標変換を使い分けるのも納得できた。
