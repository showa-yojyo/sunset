---
date: 2024-01-02 23:59:59 +0900
title: 1346 日目（曇り一時雨）東京都港区新橋の三が日休館ビルと港南のゴーストタウンデッキ
---

昼間の WSL イメージ軽量化の余波で VS Code の Git 周りがおかしいことになってい
る。話に聞いていたので慌てずに済んだものの、これはどう修繕するのだ。

WSL 再起動で直らない。というか、VS Code から作成または保存したファイルの所有者が
root になっている。これがどうもマズそうだ。コンソールで `chown -R` する。

> そして新年一発目の日記追加直後も確認が必要だ。明日のこの時間もやる。

確認完了。

[A Link to the Past: Enhanced Soundtrack - YouTube
](https://www.youtube.com/watch?v=I_jMOfoflMY): スーファミの最初のゼルダ。

2:50 消灯。就寝。

10:05 起床。洗濯。待っている間にメシ。納豆、食パン、鶏肉、バナナ。

10:45 歯を磨く。洗濯物を干す。PC を開いて携帯電話を充電。

* [オールナイトファミ魂 ハイドライドスペシャル　2024/01/01 - YouTube
  ](https://www.youtube.com/watch?v=6VDdzT_XXOg): 生放送でクリアしたのか。砂漠の裏
* 技も発動成功している。 [【タイトル数分析】 2024/01 「年間での8冠全冠維持の確率
  は？」 【将棋、確率分析、ゆっくり解説】 - YouTube
  ](https://www.youtube.com/watch?v=ySanyqBqZvI): 維持確率どころか期待値まで計算
  している。七冠から八冠の間。

11:30 PC を閉じて外出。

押上駅～東日本橋駅。いつものクセで新宿線に行く途中に急に思いついた。新橋に行く。
浅草線に引き返して東日本橋駅～新橋駅。下車。

13:25 ニュー新橋ビル。なんと年始は休館日だった。久しぶりに中を見たかったので残念
だ。今思うと私の中では中野ブロードウェイと同系統の施設なのだ。

浅草線に戻る。新橋駅～泉岳寺駅。下車。品川駅まで歩く。雨がポツポツ降ってくる。

品川駅港南口を探索。デッキ部分を大崎方面に歩いていく。コンビニ全滅。極端な街だ。
歩いて天王洲まで行くかと思ったら雨が少し強くなる。散歩中止。引き返す。

品川駅高輪口から正面の坂道を上がって高輪台駅へ。高輪台駅～押上駅。

14:50 ビッグエー墨田業平店。571 円。バナナがとにかく安い。

* 柿ピー
* オニオンとレタスのミックスサラダ
* 大根と水菜のミックスサラダ
* バナナ (4)
* 絹豆腐 (3)
* 白粥

曳舟の部屋。PC を開く。おやつ。柿ピー、豆腐、カットサラダ、バナナ二本。

* [【ファミコン】火の鳥 鳳凰編 我王の冒険【ゆっくり実況】スーパー我王が時空を越
  える - YouTube](https://www.youtube.com/watch?v=NRKoIu4MN8s): コナミ迷路ゲーム
  時間引き伸ばし説は面白い。
* [【ファミコン】ミッキーマウス 不思議の国の大冒険【ゆっくり実況】あんなミッキー
  やこんなミッキー - YouTube](https://www.youtube.com/watch?v=cZ2OKnRvFaA): 某
  チャンネルでは◯ッ◯ーマウスとか呼んで強引に紹介していたが？

16:00 歯を磨く。[Regex Boundaries—Word Boundaries and More
](https://www.rexegg.com/regex-boundaries.html) を読む。少し眠い。

16:30 座禅スタイルで昼寝。食ったばかりで横になれない。

18:30 起床。外出。

19:20 コモディイイダ東向島店。値段はお得だが量が多くて買えるものが少ない。681 円。

* 手巻寿司 (5)
* スナックサンドハムタマゴ
* スナックサンドツナマヨ
* グレーズドーナツ

曳舟の部屋。排便。入浴。

風呂から出る。PC を開く。時間調整に短いビデオを視聴。

* [#879 STAR FOX スターフォックス CORNERIA - YouTube
  ](https://www.youtube.com/watch?v=auQ9--1Wfw0): この曲をやるのはずいぶん久しぶ
  りのような。
* [他人の欠点は自分の欠点でもある　マルクスアウレリウス #名言 #quotes #shorts -
  YouTube](https://www.youtube.com/watch?v=n1ohNewMEKE): 人の過ちに腹を立てた
  ら、直ちに自分に目を向け、自分自身がどのような過ちを犯しているかを考えろとも
  主張していた。

20:30 晩飯。手巻寿司、豆腐、カットサラダ、ドーナツを食す。醤油とわさびを入手しそ
びれたが、食ってみるとこの味で問題ない。

[【スーファミ】マリオＲＰＧ　なにこの神ゲーは！？ -YouTube
](https://www.youtube.com/watch?v=hUFmc6_RlC4): このチャンネルにしては直球が飛
んできた。1996 年公開のゲームとしてはグラフィック周りの技術が謎。

21:05 歯を磨く。ノルマカレンダー作成のため Python コードを書く。

* [pandas - Generate last business day of the month variable in Python for US
  Calendar - Stack Overflow
  ](https://stackoverflow.com/questions/62557373/generate-last-business-day-of-the-month-variable-in-python-for-us-calendar)
* [python - Get the last day of the month - Stack Overflow
  ](https://stackoverflow.com/questions/42950/get-the-last-day-of-the-month)

月毎の最終営業日を出力する：

```python
import datetime
import calendar

ONEDAY = datetime.timedelta(days=1)

def is_weekend(d):
    return d.weekday() >= 5

def is_holiday(d):
    return jpholiday.is_holiday(d)

def last_business_day(year):
    for m in range(1, 13):
        _, last = calendar.monthrange(year, m)
        d = datetime.datetime(year, m, last)
        while is_weekend(d) or is_holiday(d):
            d -= ONEDAY
        yield d
```

次のようにして日付を出力、スプレッドシートに貼り付けて行事を記入する：

```python
THIS_YEAR = 2024
for d in last_business_day(THIS_YEAR):
    print(d.isoformat().split('T')[0])
```

祝日判定関数をまともにするならばこれが使えそうだ：[Lalcs/jpholiday: 日本の祝日を
取得するライブラリ](https://github.com/Lalcs/jpholiday)。上記 `is_holiday` の実
装が一行で済む。せっかくだからやってみる。

```python
import jpholiday

def is_holiday(d):
    return jpholiday.is_holiday(d)
```

結果を見ると年末が考慮に入っていない。このライブラリーは独自の休業日を追加するの
が少々手間のようだ。クラスを書かねばならない。せっかくだから最後までやるか。

22:15 [完成](https://raw.githubusercontent.com/showa-yojyo/bin/833d57aea7a685202f403c4f9c06d32b242b4fcb/last-business-days)
した。ノルマカレンダーを埋める。最終営業日の他に最終月曜日も必要だった。気分転換
のため明日に作業をとっておく。

正規表現を続ける。理論を追うだけで手一杯。`(?<!\W)[~#:@?!](?!\W)` は著者の意図通
りに機能するのか？
